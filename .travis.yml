language: node_js

node_js:
  - "lts/*"

before_deploy:
  - "echo '//registry.npmjs.org/:_authToken=${NPM_TOKEN}' > .npmrc"
  - "echo '//npm.pkg.github.com/:_authToken=${GITHUB_TOKEN}' > .npmrc"

deploy:
  # Publish to https://registry.npmjs.org/
  - provider: script
    script: "npm publish --registry=https://registry.npmjs.org/"
    skip_cleanup: true
    on:
      branch: master
      tags: true

  # Publish to https://npm.pkg.github.com/
  - provider: script
    script: "npm publish --registry=https://npm.pkg.github.com/"
    skip_cleanup: true
    on:
      branch: master
      tags: true

env:
  - secure: GXnfrqLb4OfX0+s3yJ4Hv28Tt/bp4u3Xh3WMt0BWiaXOOz9AGVbc4R96ExBItR7DIi73X6NuU2kt4+27wLaVVoYsijJmSuGoWTaXOdTzZm8xTFhCgkF9KNRmhM78mkn/HX7Ug1rfTQGImDMkVSK3BtwQMPWcN1JLQ5sjxxnMutiqKDFbAQKS0Xb2d9l8t6sSZS3qIoKTu2gyLrO4o0NnFvewcBL73Kd7QOW//SPHI3jSVEiRP5RFkHcDi5qb5jXWjysjj1ZlGqaZ2zN/kwy21rG8J+pbODVbnVmCdAaL5POqUBR7Z8/ALpqcEWyMssyKNoAVPWV96aaGhkFTbPs1YCnf5baPZdALwnhyTt5RYX/BoQPO9hVKy7snbLJWdoBq+B8TMAGZa3nvwFzNHlfP3glMyJi+ypA+diQQ2s0GmNHzXFHSFkhJIqtGtDij00vk4XiLHG7ikD9J3CN3QFz8d/o/RJnHF1m2wBsHVfGTrubyKkSrW2s3PXQ7yiiMoXCnX0sRNC/LqZW2/v5piA9iKvfXo1sJ2WIH3IKBpRF2AIk6cPuxEid6R5jTz2K/qxaQQVNKga9lB6Xgw46BGOITyMHWPB82lha2R1OpnTxHBtOLaHasXMePW+hZ03oDvd/4H9fSXofOrvz9wl9G8+SOsS0iyTCnJ2VyqPOHCu09Mx8=
